var r1=Object.defineProperty;var e1=(r,e)=>{for(var n in e)r1(r,n,{get:e[n],enumerable:!0})};var g=1e-6,N=typeof Float32Array<"u"?Float32Array:Array;var ar=Math.PI/180,ir=180/Math.PI;var O={};e1(O,{add:()=>q1,adjoint:()=>t1,clone:()=>i1,copy:()=>s1,create:()=>a1,decompose:()=>B1,determinant:()=>h1,equals:()=>$1,exactEquals:()=>H1,frob:()=>V1,fromQuat:()=>C1,fromQuat2:()=>P1,fromRotation:()=>R1,fromRotationTranslation:()=>_,fromRotationTranslationScale:()=>T1,fromRotationTranslationScaleOrigin:()=>I1,fromScaling:()=>b1,fromTranslation:()=>E1,fromValues:()=>v1,fromXRotation:()=>A1,fromYRotation:()=>L1,fromZRotation:()=>w1,frustum:()=>g1,getRotation:()=>z1,getScaling:()=>j,getTranslation:()=>S1,identity:()=>V,invert:()=>x1,lookAt:()=>U1,mul:()=>k1,multiply:()=>q,multiplyScalar:()=>_1,multiplyScalarAndAdd:()=>j1,ortho:()=>Y1,orthoNO:()=>$,orthoZO:()=>D1,perspective:()=>F1,perspectiveFromFieldOfView:()=>N1,perspectiveNO:()=>H,perspectiveZO:()=>O1,rotate:()=>l1,rotateX:()=>p1,rotateY:()=>d1,rotateZ:()=>y1,scale:()=>m1,set:()=>c1,str:()=>W1,sub:()=>Z1,subtract:()=>k,targetTo:()=>G1,translate:()=>M1,transpose:()=>f1});function a1(){var r=new N(16);return N!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function i1(r){var e=new N(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function s1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function v1(r,e,n,a,i,s,v,c,x,f,t,h,l,m,p,d){var M=new N(16);return M[0]=r,M[1]=e,M[2]=n,M[3]=a,M[4]=i,M[5]=s,M[6]=v,M[7]=c,M[8]=x,M[9]=f,M[10]=t,M[11]=h,M[12]=l,M[13]=m,M[14]=p,M[15]=d,M}function c1(r,e,n,a,i,s,v,c,x,f,t,h,l,m,p,d,M){return r[0]=e,r[1]=n,r[2]=a,r[3]=i,r[4]=s,r[5]=v,r[6]=c,r[7]=x,r[8]=f,r[9]=t,r[10]=h,r[11]=l,r[12]=m,r[13]=p,r[14]=d,r[15]=M,r}function V(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function f1(r,e){if(r===e){var n=e[1],a=e[2],i=e[3],s=e[6],v=e[7],c=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=n,r[6]=e[9],r[7]=e[13],r[8]=a,r[9]=s,r[11]=e[14],r[12]=i,r[13]=v,r[14]=c}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r}function x1(r,e){var n=e[0],a=e[1],i=e[2],s=e[3],v=e[4],c=e[5],x=e[6],f=e[7],t=e[8],h=e[9],l=e[10],m=e[11],p=e[12],d=e[13],M=e[14],A=e[15],w=n*c-a*v,R=n*x-i*v,y=n*f-s*v,E=a*x-i*c,b=a*f-s*c,z=i*f-s*x,P=t*d-h*p,B=t*M-l*p,L=t*A-m*p,T=h*M-l*d,I=h*A-m*d,C=l*A-m*M,S=w*C-R*I+y*T+E*L-b*B+z*P;return S?(S=1/S,r[0]=(c*C-x*I+f*T)*S,r[1]=(i*I-a*C-s*T)*S,r[2]=(d*z-M*b+A*E)*S,r[3]=(l*b-h*z-m*E)*S,r[4]=(x*L-v*C-f*B)*S,r[5]=(n*C-i*L+s*B)*S,r[6]=(M*y-p*z-A*R)*S,r[7]=(t*z-l*y+m*R)*S,r[8]=(v*I-c*L+f*P)*S,r[9]=(a*L-n*I-s*P)*S,r[10]=(p*b-d*y+A*w)*S,r[11]=(h*y-t*b-m*w)*S,r[12]=(c*B-v*T-x*P)*S,r[13]=(n*T-a*B+i*P)*S,r[14]=(d*R-p*E-M*w)*S,r[15]=(t*E-h*R+l*w)*S,r):null}function t1(r,e){var n=e[0],a=e[1],i=e[2],s=e[3],v=e[4],c=e[5],x=e[6],f=e[7],t=e[8],h=e[9],l=e[10],m=e[11],p=e[12],d=e[13],M=e[14],A=e[15],w=n*c-a*v,R=n*x-i*v,y=n*f-s*v,E=a*x-i*c,b=a*f-s*c,z=i*f-s*x,P=t*d-h*p,B=t*M-l*p,L=t*A-m*p,T=h*M-l*d,I=h*A-m*d,C=l*A-m*M;return r[0]=c*C-x*I+f*T,r[1]=i*I-a*C-s*T,r[2]=d*z-M*b+A*E,r[3]=l*b-h*z-m*E,r[4]=x*L-v*C-f*B,r[5]=n*C-i*L+s*B,r[6]=M*y-p*z-A*R,r[7]=t*z-l*y+m*R,r[8]=v*I-c*L+f*P,r[9]=a*L-n*I-s*P,r[10]=p*b-d*y+A*w,r[11]=h*y-t*b-m*w,r[12]=c*B-v*T-x*P,r[13]=n*T-a*B+i*P,r[14]=d*R-p*E-M*w,r[15]=t*E-h*R+l*w,r}function h1(r){var e=r[0],n=r[1],a=r[2],i=r[3],s=r[4],v=r[5],c=r[6],x=r[7],f=r[8],t=r[9],h=r[10],l=r[11],m=r[12],p=r[13],d=r[14],M=r[15],A=e*v-n*s,w=e*c-a*s,R=n*c-a*v,y=f*p-t*m,E=f*d-h*m,b=t*d-h*p,z=e*b-n*E+a*y,P=s*b-v*E+c*y,B=f*R-t*w+h*A,L=m*R-p*w+d*A;return x*z-i*P+M*B-l*L}function q(r,e,n){var a=e[0],i=e[1],s=e[2],v=e[3],c=e[4],x=e[5],f=e[6],t=e[7],h=e[8],l=e[9],m=e[10],p=e[11],d=e[12],M=e[13],A=e[14],w=e[15],R=n[0],y=n[1],E=n[2],b=n[3];return r[0]=R*a+y*c+E*h+b*d,r[1]=R*i+y*x+E*l+b*M,r[2]=R*s+y*f+E*m+b*A,r[3]=R*v+y*t+E*p+b*w,R=n[4],y=n[5],E=n[6],b=n[7],r[4]=R*a+y*c+E*h+b*d,r[5]=R*i+y*x+E*l+b*M,r[6]=R*s+y*f+E*m+b*A,r[7]=R*v+y*t+E*p+b*w,R=n[8],y=n[9],E=n[10],b=n[11],r[8]=R*a+y*c+E*h+b*d,r[9]=R*i+y*x+E*l+b*M,r[10]=R*s+y*f+E*m+b*A,r[11]=R*v+y*t+E*p+b*w,R=n[12],y=n[13],E=n[14],b=n[15],r[12]=R*a+y*c+E*h+b*d,r[13]=R*i+y*x+E*l+b*M,r[14]=R*s+y*f+E*m+b*A,r[15]=R*v+y*t+E*p+b*w,r}function M1(r,e,n){var a=n[0],i=n[1],s=n[2],v,c,x,f,t,h,l,m,p,d,M,A;return e===r?(r[12]=e[0]*a+e[4]*i+e[8]*s+e[12],r[13]=e[1]*a+e[5]*i+e[9]*s+e[13],r[14]=e[2]*a+e[6]*i+e[10]*s+e[14],r[15]=e[3]*a+e[7]*i+e[11]*s+e[15]):(v=e[0],c=e[1],x=e[2],f=e[3],t=e[4],h=e[5],l=e[6],m=e[7],p=e[8],d=e[9],M=e[10],A=e[11],r[0]=v,r[1]=c,r[2]=x,r[3]=f,r[4]=t,r[5]=h,r[6]=l,r[7]=m,r[8]=p,r[9]=d,r[10]=M,r[11]=A,r[12]=v*a+t*i+p*s+e[12],r[13]=c*a+h*i+d*s+e[13],r[14]=x*a+l*i+M*s+e[14],r[15]=f*a+m*i+A*s+e[15]),r}function m1(r,e,n){var a=n[0],i=n[1],s=n[2];return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3]*a,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*s,r[9]=e[9]*s,r[10]=e[10]*s,r[11]=e[11]*s,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function l1(r,e,n,a){var i=a[0],s=a[1],v=a[2],c=Math.sqrt(i*i+s*s+v*v),x,f,t,h,l,m,p,d,M,A,w,R,y,E,b,z,P,B,L,T,I,C,S,F;return c<g?null:(c=1/c,i*=c,s*=c,v*=c,x=Math.sin(n),f=Math.cos(n),t=1-f,h=e[0],l=e[1],m=e[2],p=e[3],d=e[4],M=e[5],A=e[6],w=e[7],R=e[8],y=e[9],E=e[10],b=e[11],z=i*i*t+f,P=s*i*t+v*x,B=v*i*t-s*x,L=i*s*t-v*x,T=s*s*t+f,I=v*s*t+i*x,C=i*v*t+s*x,S=s*v*t-i*x,F=v*v*t+f,r[0]=h*z+d*P+R*B,r[1]=l*z+M*P+y*B,r[2]=m*z+A*P+E*B,r[3]=p*z+w*P+b*B,r[4]=h*L+d*T+R*I,r[5]=l*L+M*T+y*I,r[6]=m*L+A*T+E*I,r[7]=p*L+w*T+b*I,r[8]=h*C+d*S+R*F,r[9]=l*C+M*S+y*F,r[10]=m*C+A*S+E*F,r[11]=p*C+w*S+b*F,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function p1(r,e,n){var a=Math.sin(n),i=Math.cos(n),s=e[4],v=e[5],c=e[6],x=e[7],f=e[8],t=e[9],h=e[10],l=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=s*i+f*a,r[5]=v*i+t*a,r[6]=c*i+h*a,r[7]=x*i+l*a,r[8]=f*i-s*a,r[9]=t*i-v*a,r[10]=h*i-c*a,r[11]=l*i-x*a,r}function d1(r,e,n){var a=Math.sin(n),i=Math.cos(n),s=e[0],v=e[1],c=e[2],x=e[3],f=e[8],t=e[9],h=e[10],l=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=s*i-f*a,r[1]=v*i-t*a,r[2]=c*i-h*a,r[3]=x*i-l*a,r[8]=s*a+f*i,r[9]=v*a+t*i,r[10]=c*a+h*i,r[11]=x*a+l*i,r}function y1(r,e,n){var a=Math.sin(n),i=Math.cos(n),s=e[0],v=e[1],c=e[2],x=e[3],f=e[4],t=e[5],h=e[6],l=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=s*i+f*a,r[1]=v*i+t*a,r[2]=c*i+h*a,r[3]=x*i+l*a,r[4]=f*i-s*a,r[5]=t*i-v*a,r[6]=h*i-c*a,r[7]=l*i-x*a,r}function E1(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function b1(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function R1(r,e,n){var a=n[0],i=n[1],s=n[2],v=Math.sqrt(a*a+i*i+s*s),c,x,f;return v<g?null:(v=1/v,a*=v,i*=v,s*=v,c=Math.sin(e),x=Math.cos(e),f=1-x,r[0]=a*a*f+x,r[1]=i*a*f+s*c,r[2]=s*a*f-i*c,r[3]=0,r[4]=a*i*f-s*c,r[5]=i*i*f+x,r[6]=s*i*f+a*c,r[7]=0,r[8]=a*s*f+i*c,r[9]=i*s*f-a*c,r[10]=s*s*f+x,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function A1(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=n,r[7]=0,r[8]=0,r[9]=-n,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function L1(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=0,r[2]=-n,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=0,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function w1(r,e){var n=Math.sin(e),a=Math.cos(e);return r[0]=a,r[1]=n,r[2]=0,r[3]=0,r[4]=-n,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function _(r,e,n){var a=e[0],i=e[1],s=e[2],v=e[3],c=a+a,x=i+i,f=s+s,t=a*c,h=a*x,l=a*f,m=i*x,p=i*f,d=s*f,M=v*c,A=v*x,w=v*f;return r[0]=1-(m+d),r[1]=h+w,r[2]=l-A,r[3]=0,r[4]=h-w,r[5]=1-(t+d),r[6]=p+M,r[7]=0,r[8]=l+A,r[9]=p-M,r[10]=1-(t+m),r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function P1(r,e){var n=new N(3),a=-e[0],i=-e[1],s=-e[2],v=e[3],c=e[4],x=e[5],f=e[6],t=e[7],h=a*a+i*i+s*s+v*v;return h>0?(n[0]=(c*v+t*a+x*s-f*i)*2/h,n[1]=(x*v+t*i+f*a-c*s)*2/h,n[2]=(f*v+t*s+c*i-x*a)*2/h):(n[0]=(c*v+t*a+x*s-f*i)*2,n[1]=(x*v+t*i+f*a-c*s)*2,n[2]=(f*v+t*s+c*i-x*a)*2),_(r,e,n),r}function S1(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function j(r,e){var n=e[0],a=e[1],i=e[2],s=e[4],v=e[5],c=e[6],x=e[8],f=e[9],t=e[10];return r[0]=Math.sqrt(n*n+a*a+i*i),r[1]=Math.sqrt(s*s+v*v+c*c),r[2]=Math.sqrt(x*x+f*f+t*t),r}function z1(r,e){var n=new N(3);j(n,e);var a=1/n[0],i=1/n[1],s=1/n[2],v=e[0]*a,c=e[1]*i,x=e[2]*s,f=e[4]*a,t=e[5]*i,h=e[6]*s,l=e[8]*a,m=e[9]*i,p=e[10]*s,d=v+t+p,M=0;return d>0?(M=Math.sqrt(d+1)*2,r[3]=.25*M,r[0]=(h-m)/M,r[1]=(l-x)/M,r[2]=(c-f)/M):v>t&&v>p?(M=Math.sqrt(1+v-t-p)*2,r[3]=(h-m)/M,r[0]=.25*M,r[1]=(c+f)/M,r[2]=(l+x)/M):t>p?(M=Math.sqrt(1+t-v-p)*2,r[3]=(l-x)/M,r[0]=(c+f)/M,r[1]=.25*M,r[2]=(h+m)/M):(M=Math.sqrt(1+p-v-t)*2,r[3]=(c-f)/M,r[0]=(l+x)/M,r[1]=(h+m)/M,r[2]=.25*M),r}function B1(r,e,n,a){e[0]=a[12],e[1]=a[13],e[2]=a[14];var i=a[0],s=a[1],v=a[2],c=a[4],x=a[5],f=a[6],t=a[8],h=a[9],l=a[10];n[0]=Math.sqrt(i*i+s*s+v*v),n[1]=Math.sqrt(c*c+x*x+f*f),n[2]=Math.sqrt(t*t+h*h+l*l);var m=1/n[0],p=1/n[1],d=1/n[2],M=i*m,A=s*p,w=v*d,R=c*m,y=x*p,E=f*d,b=t*m,z=h*p,P=l*d,B=M+y+P,L=0;return B>0?(L=Math.sqrt(B+1)*2,r[3]=.25*L,r[0]=(E-z)/L,r[1]=(b-w)/L,r[2]=(A-R)/L):M>y&&M>P?(L=Math.sqrt(1+M-y-P)*2,r[3]=(E-z)/L,r[0]=.25*L,r[1]=(A+R)/L,r[2]=(b+w)/L):y>P?(L=Math.sqrt(1+y-M-P)*2,r[3]=(b-w)/L,r[0]=(A+R)/L,r[1]=.25*L,r[2]=(E+z)/L):(L=Math.sqrt(1+P-M-y)*2,r[3]=(A-R)/L,r[0]=(b+w)/L,r[1]=(E+z)/L,r[2]=.25*L),r}function T1(r,e,n,a){var i=e[0],s=e[1],v=e[2],c=e[3],x=i+i,f=s+s,t=v+v,h=i*x,l=i*f,m=i*t,p=s*f,d=s*t,M=v*t,A=c*x,w=c*f,R=c*t,y=a[0],E=a[1],b=a[2];return r[0]=(1-(p+M))*y,r[1]=(l+R)*y,r[2]=(m-w)*y,r[3]=0,r[4]=(l-R)*E,r[5]=(1-(h+M))*E,r[6]=(d+A)*E,r[7]=0,r[8]=(m+w)*b,r[9]=(d-A)*b,r[10]=(1-(h+p))*b,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function I1(r,e,n,a,i){var s=e[0],v=e[1],c=e[2],x=e[3],f=s+s,t=v+v,h=c+c,l=s*f,m=s*t,p=s*h,d=v*t,M=v*h,A=c*h,w=x*f,R=x*t,y=x*h,E=a[0],b=a[1],z=a[2],P=i[0],B=i[1],L=i[2],T=(1-(d+A))*E,I=(m+y)*E,C=(p-R)*E,S=(m-y)*b,F=(1-(l+A))*b,Y=(M+w)*b,D=(p+R)*z,G=(M-w)*z,W=(1-(l+d))*z;return r[0]=T,r[1]=I,r[2]=C,r[3]=0,r[4]=S,r[5]=F,r[6]=Y,r[7]=0,r[8]=D,r[9]=G,r[10]=W,r[11]=0,r[12]=n[0]+P-(T*P+S*B+D*L),r[13]=n[1]+B-(I*P+F*B+G*L),r[14]=n[2]+L-(C*P+Y*B+W*L),r[15]=1,r}function C1(r,e){var n=e[0],a=e[1],i=e[2],s=e[3],v=n+n,c=a+a,x=i+i,f=n*v,t=a*v,h=a*c,l=i*v,m=i*c,p=i*x,d=s*v,M=s*c,A=s*x;return r[0]=1-h-p,r[1]=t+A,r[2]=l-M,r[3]=0,r[4]=t-A,r[5]=1-f-p,r[6]=m+d,r[7]=0,r[8]=l+M,r[9]=m-d,r[10]=1-f-h,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function g1(r,e,n,a,i,s,v){var c=1/(n-e),x=1/(i-a),f=1/(s-v);return r[0]=s*2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s*2*x,r[6]=0,r[7]=0,r[8]=(n+e)*c,r[9]=(i+a)*x,r[10]=(v+s)*f,r[11]=-1,r[12]=0,r[13]=0,r[14]=v*s*2*f,r[15]=0,r}function H(r,e,n,a,i){var s=1/Math.tan(e/2);if(r[0]=s/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0){var v=1/(a-i);r[10]=(i+a)*v,r[14]=2*i*a*v}else r[10]=-1,r[14]=-2*a;return r}var F1=H;function O1(r,e,n,a,i){var s=1/Math.tan(e/2);if(r[0]=s/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0){var v=1/(a-i);r[10]=i*v,r[14]=i*a*v}else r[10]=-1,r[14]=-a;return r}function N1(r,e,n,a){var i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),v=Math.tan(e.leftDegrees*Math.PI/180),c=Math.tan(e.rightDegrees*Math.PI/180),x=2/(v+c),f=2/(i+s);return r[0]=x,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=f,r[6]=0,r[7]=0,r[8]=-((v-c)*x*.5),r[9]=(i-s)*f*.5,r[10]=a/(n-a),r[11]=-1,r[12]=0,r[13]=0,r[14]=a*n/(n-a),r[15]=0,r}function $(r,e,n,a,i,s,v){var c=1/(e-n),x=1/(a-i),f=1/(s-v);return r[0]=-2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*f,r[11]=0,r[12]=(e+n)*c,r[13]=(i+a)*x,r[14]=(v+s)*f,r[15]=1,r}var Y1=$;function D1(r,e,n,a,i,s,v){var c=1/(e-n),x=1/(a-i),f=1/(s-v);return r[0]=-2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=f,r[11]=0,r[12]=(e+n)*c,r[13]=(i+a)*x,r[14]=s*f,r[15]=1,r}function U1(r,e,n,a){var i,s,v,c,x,f,t,h,l,m,p=e[0],d=e[1],M=e[2],A=a[0],w=a[1],R=a[2],y=n[0],E=n[1],b=n[2];return Math.abs(p-y)<g&&Math.abs(d-E)<g&&Math.abs(M-b)<g?V(r):(t=p-y,h=d-E,l=M-b,m=1/Math.sqrt(t*t+h*h+l*l),t*=m,h*=m,l*=m,i=w*l-R*h,s=R*t-A*l,v=A*h-w*t,m=Math.sqrt(i*i+s*s+v*v),m?(m=1/m,i*=m,s*=m,v*=m):(i=0,s=0,v=0),c=h*v-l*s,x=l*i-t*v,f=t*s-h*i,m=Math.sqrt(c*c+x*x+f*f),m?(m=1/m,c*=m,x*=m,f*=m):(c=0,x=0,f=0),r[0]=i,r[1]=c,r[2]=t,r[3]=0,r[4]=s,r[5]=x,r[6]=h,r[7]=0,r[8]=v,r[9]=f,r[10]=l,r[11]=0,r[12]=-(i*p+s*d+v*M),r[13]=-(c*p+x*d+f*M),r[14]=-(t*p+h*d+l*M),r[15]=1,r)}function G1(r,e,n,a){var i=e[0],s=e[1],v=e[2],c=a[0],x=a[1],f=a[2],t=i-n[0],h=s-n[1],l=v-n[2],m=t*t+h*h+l*l;m>0&&(m=1/Math.sqrt(m),t*=m,h*=m,l*=m);var p=x*l-f*h,d=f*t-c*l,M=c*h-x*t;return m=p*p+d*d+M*M,m>0&&(m=1/Math.sqrt(m),p*=m,d*=m,M*=m),r[0]=p,r[1]=d,r[2]=M,r[3]=0,r[4]=h*M-l*d,r[5]=l*p-t*M,r[6]=t*d-h*p,r[7]=0,r[8]=t,r[9]=h,r[10]=l,r[11]=0,r[12]=i,r[13]=s,r[14]=v,r[15]=1,r}function W1(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}function V1(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]+r[3]*r[3]+r[4]*r[4]+r[5]*r[5]+r[6]*r[6]+r[7]*r[7]+r[8]*r[8]+r[9]*r[9]+r[10]*r[10]+r[11]*r[11]+r[12]*r[12]+r[13]*r[13]+r[14]*r[14]+r[15]*r[15])}function q1(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r[6]=e[6]+n[6],r[7]=e[7]+n[7],r[8]=e[8]+n[8],r[9]=e[9]+n[9],r[10]=e[10]+n[10],r[11]=e[11]+n[11],r[12]=e[12]+n[12],r[13]=e[13]+n[13],r[14]=e[14]+n[14],r[15]=e[15]+n[15],r}function k(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r[4]=e[4]-n[4],r[5]=e[5]-n[5],r[6]=e[6]-n[6],r[7]=e[7]-n[7],r[8]=e[8]-n[8],r[9]=e[9]-n[9],r[10]=e[10]-n[10],r[11]=e[11]-n[11],r[12]=e[12]-n[12],r[13]=e[13]-n[13],r[14]=e[14]-n[14],r[15]=e[15]-n[15],r}function _1(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r[6]=e[6]*n,r[7]=e[7]*n,r[8]=e[8]*n,r[9]=e[9]*n,r[10]=e[10]*n,r[11]=e[11]*n,r[12]=e[12]*n,r[13]=e[13]*n,r[14]=e[14]*n,r[15]=e[15]*n,r}function j1(r,e,n,a){return r[0]=e[0]+n[0]*a,r[1]=e[1]+n[1]*a,r[2]=e[2]+n[2]*a,r[3]=e[3]+n[3]*a,r[4]=e[4]+n[4]*a,r[5]=e[5]+n[5]*a,r[6]=e[6]+n[6]*a,r[7]=e[7]+n[7]*a,r[8]=e[8]+n[8]*a,r[9]=e[9]+n[9]*a,r[10]=e[10]+n[10]*a,r[11]=e[11]+n[11]*a,r[12]=e[12]+n[12]*a,r[13]=e[13]+n[13]*a,r[14]=e[14]+n[14]*a,r[15]=e[15]+n[15]*a,r}function H1(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]}function $1(r,e){var n=r[0],a=r[1],i=r[2],s=r[3],v=r[4],c=r[5],x=r[6],f=r[7],t=r[8],h=r[9],l=r[10],m=r[11],p=r[12],d=r[13],M=r[14],A=r[15],w=e[0],R=e[1],y=e[2],E=e[3],b=e[4],z=e[5],P=e[6],B=e[7],L=e[8],T=e[9],I=e[10],C=e[11],S=e[12],F=e[13],Y=e[14],D=e[15];return Math.abs(n-w)<=g*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(a-R)<=g*Math.max(1,Math.abs(a),Math.abs(R))&&Math.abs(i-y)<=g*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(s-E)<=g*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(v-b)<=g*Math.max(1,Math.abs(v),Math.abs(b))&&Math.abs(c-z)<=g*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(x-P)<=g*Math.max(1,Math.abs(x),Math.abs(P))&&Math.abs(f-B)<=g*Math.max(1,Math.abs(f),Math.abs(B))&&Math.abs(t-L)<=g*Math.max(1,Math.abs(t),Math.abs(L))&&Math.abs(h-T)<=g*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(l-I)<=g*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(m-C)<=g*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(p-S)<=g*Math.max(1,Math.abs(p),Math.abs(S))&&Math.abs(d-F)<=g*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(M-Y)<=g*Math.max(1,Math.abs(M),Math.abs(Y))&&Math.abs(A-D)<=g*Math.max(1,Math.abs(A),Math.abs(D))}var k1=q,Z1=k;function Z(r,e,n,a){r.clearColor(1,1,1,1),r.clearDepth(1),r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);let i=45*Math.PI/180;var s,v;r.canvas instanceof HTMLCanvasElement?(s=r.canvas.clientWidth,v=r.canvas.clientHeight):(s=r.canvas.width,v=r.canvas.height);let c=s/v,x=.1,f=100,t=O.create();O.perspective(t,i,c,x,f);let h=O.create();O.translate(h,h,[-0,0,-6]),O.rotate(h,h,a,[0,0,1]),O.rotate(h,h,a*.7,[0,1,0]),O.rotate(h,h,a*.3,[1,0,0]),Q1(r,n,e),X1(r,n,e),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n.indices),r.useProgram(e.program),r.uniformMatrix4fv(e.uniformLocations.projectionMatrix,!1,t),r.uniformMatrix4fv(e.uniformLocations.modelViewMatrix,!1,h);{let m=r.UNSIGNED_SHORT;r.drawElements(r.TRIANGLES,36,m,0)}}function Q1(r,e,n){let i=r.FLOAT,s=!1,v=0,c=0;r.bindBuffer(r.ARRAY_BUFFER,e.position),r.vertexAttribPointer(n.attribLocations.vertexPosition,3,i,s,v,c),r.enableVertexAttribArray(n.attribLocations.vertexPosition)}function X1(r,e,n){let i=r.FLOAT,s=!1,v=0,c=0;r.bindBuffer(r.ARRAY_BUFFER,e.color),r.vertexAttribPointer(n.attribLocations.vertexColor,4,i,s,v,c),r.enableVertexAttribArray(n.attribLocations.vertexColor)}function Q(r){let e=K1(r);if(!e)throw Error("Failed to initialize position buffer");let n=J1(r);if(!n)throw Error("Failed to initialize color buffer");let a=o1(r);if(!a)throw Error("Failed to initialize position buffer");return{position:e,color:n,indices:a}}function K1(r){let e=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,e);let n=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1];return r.bufferData(r.ARRAY_BUFFER,new Float32Array(n),r.STATIC_DRAW),e}function J1(r){let e=[[0,0,0,0],[1,0,0,1],[0,1,0,1],[0,0,1,1],[1,1,0,1],[1,0,1,1]];var n=[],a;for(a=0;a<e.length;++a){let s=e[a];n=n.concat(s,s,s,s)}let i=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,i),r.bufferData(r.ARRAY_BUFFER,new Float32Array(n),r.STATIC_DRAW),i}function o1(r){let e=r.createBuffer();r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e);let n=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];return r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),r.STATIC_DRAW),e}var X=0,K=0,J=[];async function u1(){try{let r=await fetch("/answers");if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return(await r.json()).answers||[]}catch(r){throw console.error("Failed to fetch answers:",r),r}}function rr(){let r=document.getElementById("hate-ball-canvas");if(!r){U("Canvas element not found.");return}let e=r.getContext("webgl");if(!e||e===null){U("Failed to get rendering context this is a bug :(");return}e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT);let i=er(e,`
        attribute vec4 aVertexPosition;
        attribute vec4 aVertexColor;

        uniform mat4 uModelViewMatrix;
        uniform mat4 uProjectionMatrix;

        varying lowp vec4 vColor;

        void main(void) {
        gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;
        vColor = aVertexColor;
        }
    `,`
        varying lowp vec4 vColor;

        void main(void) {
        gl_FragColor = vColor;
        }
    `);if(!i)throw Error("Shader program failed to initialize.");let s={program:i,attribLocations:{vertexPosition:e.getAttribLocation(i,"aVertexPosition"),vertexColor:e.getAttribLocation(i,"aVertexColor")},uniformLocations:{projectionMatrix:e.getUniformLocation(i,"uProjectionMatrix"),modelViewMatrix:e.getUniformLocation(i,"uModelViewMatrix")}},v=Q(e),c=0;function x(f,t){f*=.001,K=f-c,c=f,Z(t,s,v,X),X+=K,window.requestAnimationFrame(h=>x(h,t))}window.requestAnimationFrame(f=>x(f,e))}async function U(r){console.error(r);let e=document.getElementById("error");e&&(e.textContent=r,e.classList.remove("hidden"))}async function o(){let r=document.getElementById("error");try{let e=await u1();if(!e.length)U("No answers received from the server.");else{console.debug(`Received answers: ${e.join(" | ")}`),J=e;let n=document.getElementById("answer");n&&(n.textContent=J[0],n.classList.remove("hidden")),r&&r.classList.add("hidden")}}catch(e){U(`Error fetching answer: ${e}`)}}document.addEventListener("DOMContentLoaded",()=>{let r=document.getElementById("get_answer");r&&r.addEventListener("click",o),o(),rr()});function er(r,e,n){let a=u(r,r.VERTEX_SHADER,e),i=u(r,r.FRAGMENT_SHADER,n);if(!a||!i)throw new Error("Shader creation failed");let s=r.createProgram();return r.attachShader(s,a),r.attachShader(s,i),r.linkProgram(s),r.getProgramParameter(s,r.LINK_STATUS)?s:(alert(`Unable to initialize the shader program: ${r.getProgramInfoLog(s)}`),null)}function u(r,e,n){let a=r.createShader(e);if(!a)throw new Error("Unable to create shader");return r.shaderSource(a,n),r.compileShader(a),r.getShaderParameter(a,r.COMPILE_STATUS)?a:(alert(`An error occurred compiling the shaders: ${r.getShaderInfoLog(a)}`),r.deleteShader(a),null)}
